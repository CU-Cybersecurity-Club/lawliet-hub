apiVersion: v1
kind: Pod
metadata:
  name: lawliet-env-michael-test
  labels:
    app: lawliet-env
    app-specific: lawliet-env-michael-test
spec:
  containers:
  - name: lawliet-env-michael-test
    image: michaelmdresser/lawliet:vnc-latest
    command: ["/bin/bash"]
    args: ["-c", "add-vnc-user root pass && /start.sh && echo 'test' > ~/.ssh/authorized_keys && service ssh start; /start-vnc.sh; tail -f /dev/null"]
    #args: ["-c", "add-vnc-user root pass && /start.sh && echo 'test' > ~/.ssh/authorized_keys && service ssh start; /start-vnc.sh; echo 0 > /proc/sys/net/ipv6/conf/all/disable_ipv6; tail -f /dev/null"]
    #args: ["/bin/sh -c 'ls /; add-vnc-user root pass && /start.sh && && mkdir ~/.ssh && echo testkey > ~/.ssh/authorized_keys && service ssh start; /start-vnc.sh'"]
    #args: ["/bin/sh -c '/start.sh && echo testkey > ~/.ssh/authorized_keys && service ssh start'"]
    ports:
    - containerPort: 22
    - containerPort: 6080
    securityContext:
      capabilities:
        add: ["NET_ADMIN"]
